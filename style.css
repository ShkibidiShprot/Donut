:root {
  --cork: #d3b38d;
  --paper: #f8f1dd;
  --sticky: #f7e28f;
  --thread: #c8433a;
  --ink: #2c2c2c;
}

html, body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  position: fixed;
  background: #222;
  font-family: 'Inter', sans-serif;
  color: var(--ink);
  overscroll-behavior: none;
}
* { box-sizing: border-box; }

.workspace {
  position: relative;
  width: 100vw;
  height: 100vh;
  background: radial-gradient(circle at center, #2a2a2a, #1a1a1a);
  overflow: hidden;
}

/* --- HUD --- */
.hud {
  position: fixed;
  top: 24px;
  left: 24px;
  background: rgba(255, 255, 255, 0.96);
  border-radius: 12px;
  padding: 10px 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  z-index: 100;
  border: 1px solid rgba(0,0,0,0.1);
}
.badge { 
  display: inline-flex; 
  align-items: center; 
  gap: 8px; 
  background: #ffecd1; 
  padding: 4px 12px; 
  border-radius: 99px; 
  color: #8b5e34; 
  font-weight: 700; 
  font-size: 13px; 
}
.badge span { 
  display: block; width: 8px; height: 8px; 
  background: var(--thread); border-radius: 50%; 
}
.hud-text { font-size: 11px; color: #666; margin-top: 4px; font-weight: 500; }

/* --- BOARD --- */
.board {
  position: absolute;
  left: 0; top: 0;
  width: 2600px; height: 1600px;
  background-color: var(--cork);
  background-image: 
    radial-gradient(rgba(255,255,255,0.2) 2px, transparent 2px),
    radial-gradient(rgba(0,0,0,0.05) 2px, transparent 2px);
  background-size: 30px 30px, 40px 40px;
  background-position: 0 0, 15px 15px;
  border: 16px solid #8d6e53;
  border-radius: 20px;
  box-shadow: inset 0 0 60px rgba(0,0,0,0.4), 0 30px 80px rgba(0,0,0,0.6);
  transform-origin: 0 0;
  touch-action: none;
  cursor: grab;
  z-index: 1;
  contain: layout style;
  will-change: transform;
  transform: translateZ(0); 
}
.board.dragging { cursor: grabbing; }

/* Noise Pattern */
.board::after {
  content: ""; position: absolute; inset: 0;
  background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="n"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23n)" opacity="0.07"/%3E%3C/svg%3E');
  pointer-events: none; opacity: 0.6; mix-blend-mode: multiply;
}

/* --- ITEMS --- */
.item {
  position: absolute;
  padding: 20px 24px;
  border-radius: 2px;
  color: var(--ink);
  box-shadow: 2px 4px 10px rgba(0,0,0,0.15);
  transform: rotate(var(--rotation, 0deg)) translateZ(0);
  transition: transform 0.08s linear;
  user-select: none;
  cursor: pointer;
  background: var(--paper);
}
.item:hover { 
  transform: rotate(var(--rotation, 0deg)) scale(1.02) translateZ(0);
  z-index: 50; 
  box-shadow: 6px 12px 24px rgba(0,0,0,0.2);
}
.item.active { 
  transform: rotate(var(--rotation, 0deg)) scale(1.05) translateZ(0);
  z-index: 100; 
  box-shadow: 0 20px 50px rgba(0,0,0,0.4); 
}

.handwriting { font-family: 'Caveat', cursive; }
.paper { background: #fdf6e3; }
.sticky { background: #fff0a5; }

.polaroid { background: #fff; padding: 14px 14px 24px; border-radius: 2px; }
.polaroid .frame { 
  width: 100%; height: 160px; 
  background: #eee; margin-bottom: 12px; 
  box-shadow: inset 0 0 15px rgba(0,0,0,0.1);
  overflow: hidden;
}

/* --- DETAILS --- */
.pin {
  position: absolute; width: 12px; height: 12px;
  background: radial-gradient(circle at 30% 30%, #ff6b6b, #c0392b);
  border-radius: 50%; top: -6px; left: calc(50% - 6px);
  box-shadow: 1px 2px 4px rgba(0,0,0,0.3); z-index: 2;
}

.tape {
  position: absolute; top: -12px; left: 35%;
  width: 60px; height: 20px;
  background: rgba(255,255,255,0.45);
  transform: rotate(-3deg);
  backdrop-filter: blur(1px);
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.strings { position: absolute; inset: 0; pointer-events: none; z-index: 0; }
.strings line {
  stroke: var(--thread); stroke-width: 2px;
  stroke-dasharray: 5 5; opacity: 0.8;
}

.background-text {
  position: absolute; font-family: 'Rock Salt', cursive;
  color: rgba(60, 40, 20, 0.25); font-size: 22px;
  pointer-events: none; z-index: 0;
}

/* --- STICKERS --- */
.sticker-paw {
  position: absolute; width: 24px; height: 24px;
  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23a18cd1"%3E%3Cpath d="M12 2C13.1 2 14 2.9 14 4S13.1 6 12 6 10 5.1 10 4 10.9 2 12 2M17 5C18.1 5 19 5.9 19 7S18.1 9 17 9 15 8.1 15 7 15.9 5 17 5M7 5C8.1 5 9 5.9 9 7S8.1 9 7 9 5 8.1 5 7 5.9 5 7 5M12 8C15.3 8 18 10.7 18 14C18 17.3 15.3 20 12 20S6 17.3 6 14C6 10.7 8.7 8 12 8Z"/%3E%3C/svg%3E');
  pointer-events: none; opacity: 0.8;
}

.sticker-star {
  position: absolute; width: 30px; height: 30px;
  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ffd700"%3E%3Cpath d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/%3E%3C/svg%3E');
  filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
}

.sticker-heart {
  position: absolute; width: 24px; height: 24px;
  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff6b6b"%3E%3Cpath d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/%3E%3C/svg%3E');
}

.sticker.label {
  padding: 4px 12px; background: #e74c3c; color: white;
  font-weight: bold; font-family: sans-serif; font-size: 12px;
  border-radius: 2px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  position: absolute; pointer-events: none;
}

/* --- OVERLAY --- */
.overlay {
  position: fixed; inset: 0;
  display: grid; place-items: center;
  background: rgba(0,0,0,0.6);
  opacity: 0; pointer-events: none;
  transition: opacity 0.2s ease; z-index: 200;
  backdrop-filter: blur(5px);
}
.overlay.show { opacity: 1; pointer-events: auto; }

.overlay-card {
  background: #fffaf0; padding: 40px;
  border-radius: 8px; width: min(90vw, 500px);
  box-shadow: 0 25px 50px rgba(0,0,0,0.5);
  transform: translateY(20px);
  transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.overlay.show .overlay-card { transform: translateY(0); }
.overlay .close-hint { position: absolute; top: 16px; right: 20px; font-size: 12px; color: #999; }
